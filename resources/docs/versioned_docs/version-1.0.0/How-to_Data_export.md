---
title: 'How-to: Data export'
---

## Example 1

### Condition

We have sales orders for several books.

import {CodeSample} from './CodeSample.mdx'

<CodeSample url="https://documentation.lsfusion.org/sample?file=UseCaseExport&block=sample1"/>

We need to create a button that exports the contents of the order in the XML format.

### Solution

<CodeSample url="https://documentation.lsfusion.org/sample?file=UseCaseExport&block=solution1"/>

To upload the data in the XML format, we need to create a form [with the corresponding structure](Structured_view.md) and then call the [EXPORT operator](EXPORT_operator.md). This operator will generate a file based on the form and then write the file to the **exportFile** property, which is then opened on the client side using the **open** action. The file will be opened in the software associated with its extension (i. e. ".json").

The resulting XML will look like this:

    <Order timeStamp="13.11.18 12:28:58">
       <Info>
          <date>13.11.18</date>
          <number>12</number>
          <Customer>
             <name>Customer2</name>
             <address>Address2</address>
          </Customer>
       </Info>
       <Specification count="2">
          <Detail>
             <nameBook>Book2</nameBook>
             <quantity>1</quantity>
             <price currency="USD">3.99</price>
          </Detail>
          <Detail>
             <nameBook>Book1</nameBook>
             <quantity>2</quantity>
             <price currency="EUR">4.99</price>
          </Detail>
       </Specification>
    </Order>

The parent tag **Order** matches the name of the form. Names of all other tags are defined either by a property name on the form (e. g. **date**, **number** or **count**) or by the special parameter **EXTID** (e. g. **name** and **address**). Use of EXTID is preferable when the form contains several properties with the same name, but for different objects.

To create "intermediate" tags (e. g. **Info**, **Customer** or **Specification**), the correspondingly nested groups are created to which the necessary properties are then exported.

Use of the **ATTR** attribute allows you to put the value not in a separate tag, but in the attribute of a parent tag (e. g. **timeStamp** or **count**).

To put the currency attribute into the **price** tag, a group with the corresponding name is created, into which the **nameCurrency** and **price** properties are then added. Since the **ATTR** attribute is specified for currency, the currency is added to the **price** tag as attribute. And for the price, the predefined **EXTID** **value** is set and therefore the value is written directly to the **price** tag. Without all these parameters, the result would be as follows:

<price\><currency\>USD</currency\><price\>4.99</price\></price\>.

If you have a target XML template into which you need to export data, then use the following rules.

Any tag in the resulting file is generated by one of four elements:

1.  *Property* (to be declared using **PROPERTIES**).
2.  *Object* (to be declared using **OBJECTS**).
3.  *Property group* (to be declared using **GROUP** outside the form).
4.  *Form* (the upper tag)

-   If the tag repeats several times in a row (e. g. **Detail**), declare an *object* with the matching name.

-   If a tag contains nested tags, but is used only once (e. g. **Specification**), then declare a *property group*.

-   If the tag contains attributes (e. g. count = "2"), then it must be generated either by a *property group* or by an *object* (depending on whether this tag is used once or more).

-   If the tag contains a value, then such tag must be generated either by a *property* (e. g. **nameBook** or **quantity**) with the corresponding name or by an object/property group with the only "nested" property having **EXTID** 'value').

## Example 2

### Condition

Similar to **Example 1**.

We need to create a button that exports the contents of the order in the JSON format.

### Solution

<CodeSample url="https://documentation.lsfusion.org/sample?file=UseCaseExport&block=solution2"/>

The resulting file will look like this:

    {  
       "timeStamp":"13.11.18 15:11:45",
       "Info":{  
          "date":"13.11.18",
          "number":"12",
          "Customer":{  
             "address":"Address 2",
             "name":"Customer 2"
          }
       },
       "Specification":{  
          "count":2,
          "Detail":[  
             {  
                "quantity":1,
                "price":3.99,
                "nameBook":"Book 2"
             },
             {  
                "quantity":2,
                "price":4.99,
                "nameBook":"Book 1"
             }
          ]
       }
    }

Note that the **ATTR** instruction is ignored when you export data in the JSON format.

## Example 3

### Condition

Similar to **Example 1**.

We need to create a button that exports all the orders for a certain date in the CSV format.

### Solution

<CodeSample url="https://documentation.lsfusion.org/sample?file=UseCaseExport&block=solution3"/>

The first action gets a date as input and then generates a flat CSV file with a semicolon delimiter using the **EXPORT** operator. The file will look like this:

    number;customer;book;quantity;price
    14;Customer 1;Book 1;2;8.99
    12;Customer 2;Book 2;1;3.99
    12;Customer 2;Book 1;2;4.99

The column name is overridden for the first three parameters, while the other two use the names of the corresponding properties. The result is first written to the local property **file**. Then the user is prompted to save the file from that property to his workstation. This is done using[WRITE operator](WRITE_operator.md).

The second action opens the form, asks the user to enter a date and then calls the first data export action.
